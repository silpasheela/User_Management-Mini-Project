<%- include('../layouts/header.ejs') %>

<link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/5613/5613938.png" type="image/x-icon">

  <section class="vh-100" style="background-color:rgb(4, 2, 60)">
  <div class="container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-12 col-xl-11">
        <div class="card text-black" style="border-radius: 25px">
          <div class="card-body p-md-5">
            <div class="row justify-content-center">
              <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">
                <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">
                  Sign up 
                </p>
                <% if(typeof message !=='undefined' ) { %>
                  <p style="color: green"><%= message %></p>
                  <% } %>
                <form action="/register" method="post" onsubmit="return allChecking()">
                  <div class="form-outline mb-4"> 
                    <input type="text" id="name" name="name" class="form-control form-control-lg" placeholder="Enter your full name" onchange="nameChecking()"/>
                    <span id="Name"></span>
                  </div>
                  <!-- Email input -->
                  <div class="form-outline mb-4">
                    <input type="email" id="email" name="email" class="form-control form-control-lg" placeholder="Email address" onchange="emailChecking()"/>
                    <span id="Email"></span>
                  </div>
                  <div class="form-outline mb-4">                  
                    <input type="text" id="number" name="mno" class="form-control form-control-lg" placeholder="Phone number" onchange="numberChecking()"/>
                    <span id="Number"></span>
                  </div>
                  <!-- Password input -->
                  <div class="form-outline mb-4">              
                    <input type="password" name="password" id="password" placeholder="Password" class="form-control form-control-lg" onchange="passwordChecking()"/>
                    <span id="Password"></span>
                  </div>
                  <div class="form-outline mb-4">        
                    <input type="password" name="password2" id="password2" placeholder="Re-enter the password" class="form-control form-control-lg" onchange="passwordChecking2()"/>
                    <span id="Password2"></span>
                  </div>
                  <div
                    class="d-flex justify-content-around align-items-center mb-4"
                  ></div>
                  <!-- Submit button -->
                  <button
                    type="submit"
                    class="btn btn-primary btn-lg btn-block rounded-pill"
                    value="Register"
                    onclick="nameChecking() , emailChecking(), numberChecking(), passwordChecking(), passwordChecking2()"> 
                    Sign Up
                  </button><br>
                  <a href="/login">back to login</a>
                  <div class="divider d-flex align-items-center my-4">
                    <p class="text-center fw-bold mx-3 mb-0 text-muted"></p>
                  </div>
                </form>                
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
    function nameChecking(){
    let name=document.getElementById("name").value;
     if(name ==""){
      document.getElementById("Name").innerHTML="Please enter your name";
      return false
       }else{
        document.getElementById("Name").innerHTML="";
          return true
       }
  }
  function emailChecking(){
    let emailId=document.getElementById("email").value;
    console.log("emailId"+emailId);
    if(/^\w+([\.-]?\w+)@\w+([\.-]?\w+)(\.\w{2,3})+$/.test(emailId)==false){
      document.getElementById("Email").innerHTML="Please enter a valid email address";
      return false;
    }else{
      document.getElementById("Email").innerHTML="";
      return true;
    }
  }
  function numberChecking(){
    let number=document.getElementById("number").value;
     if(/^[0-9]+$/.test(number)==false){
      document.getElementById("Number").innerHTML="Please enter a valid phone number";
      return false
     }
    else if(number.length != 10){
      document.getElementById("Number").innerHTML="Please enter 10 digit phone number";
      return false
       }else{
        document.getElementById("Number").innerHTML="";
          return true
       }
  }
  let password=document.getElementById("password").value; 
  function passwordChecking(){
    password=document.getElementById("password").value; 
     if(password.length <8){
      document.getElementById("Password").innerHTML="Password must be at least 8 characters";
      return false
       }else{
        document.getElementById("Password").innerHTML="";
          return true
       }
  }
  function passwordChecking2(){
    let password2=document.getElementById("password2").value;
    console.log(password2)
     if(password2 != password || password2==""){
      document.getElementById("Password2").innerHTML="Passwords doesn't match.";
      return false
       }else{
        document.getElementById("Password2").innerHTML="";
        return true
       }
      }
  function allChecking(){
    if(nameChecking()&&emailChecking()&&numberChecking()&&passwordChecking()&&passwordChecking2()){
      return true
    }else{
      return false
    }
  }
</script>

 <%- include('../layouts/footer.ejs') %>